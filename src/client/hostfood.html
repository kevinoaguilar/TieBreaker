<!DOCTYPE html>
<html>
<head>
    <title>Host Food Session - TieBreaker</title>
    <link rel="icon" type="image/png" href="images/tieBreaker.png">
</head>
<body bgcolor="#8ac1f1">
    <font face="Arial">
    
    <div style="background-color: white; padding: 15px; box-shadow: 0px 4px 10px rgba(0,0,0,0.1);">
        <table width="100%">
            <tr>
                <td><b style="font-size: 20px; color: #333;">TieBreaker</b></td>
                <td align="right">
                    <a href="dashboard.html" style="text-decoration: none; color: red; font-weight: bold;">Leave Session</a>
                </td>
            </tr>
        </table>
    </div>
    
    <br><br>
    
    <center>
        <div style="background-color: white; width: 500px; padding: 40px; border-radius: 20px; box-shadow: 0px 10px 30px rgba(0,0,0,0.2);">
            <h1 style="margin-top: 0; color: #333;">üçï Food Session Ready!</h1>
            
            <div style="background-color: #fff9c4; padding: 10px; border-radius: 10px; border: 1px solid #fbc02d; color: #5d4037; display: inline-block; width: 80%;">
                <b>MODE: FOOD üçï</b>
            </div>
            
            <br><br>
            
            <div style="border: 2px dashed #8ac1f1; padding: 25px; background-color: #f1f5f9; border-radius: 15px;">
                <p style="margin-top: 0; color: #666;">Share this code with your group:</p>
                <h1 id="groupCode" style="font-size: 45px; color: red; letter-spacing: 5px; margin: 10px 0;">------</h1>
                <p style="color: #666; font-size: 14px;">They can enter this on the dashboard to join</p>
                <button onclick="copyCode()" style="background-color: #333; color: white; padding: 10px 20px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">
                    Copy Code
                </button>
            </div>
            
            <br><br>
            
            <h2 style="color: #333;">Participants (1)</h2>
            
            <div id="participantsList" style="background-color: #f1f5f9; padding: 15px; border-radius: 15px;">
                <div style="background-color: white; padding: 12px; margin: 8px; border-left: 5px solid red; border-radius: 8px; text-align: left; box-shadow: 0px 2px 5px rgba(0,0,0,0.05);">
                    You (Host) <span style="background-color: red; color: white; padding: 3px 8px; border-radius: 5px; font-size: 11px; float: right; font-weight: bold;">HOST</span>
                </div>
                <p id="waitingMsg" style="color: gray; margin: 10px 0;"><i>Waiting for others to join...</i></p>
            </div>
            
            <br>
            
            <button id="startBtn" disabled onclick="location.href='votefood.html'" style="background-color: #ccc; color: white; padding: 18px; width: 100%; border: none; border-radius: 12px; font-size: 20px; font-weight: bold; cursor: not-allowed; box-shadow: 0px 4px 10px rgba(0,0,0,0.1);">
                Start Session
            </button>
            <p id="requirementMsg" style="color: gray; font-size: 14px; margin-top: 10px;">Need at least 2 people to start</p>
        </div>
    </center>
    
    </font>
    
    <script>
        // Make a random code
        function makeCode() {
            return Math.floor(Math.random() * 900000) + 100000;
        }
        
        var myCode = makeCode();
        document.getElementById('groupCode').innerHTML = myCode;
        
        function copyCode() {
            var code = document.getElementById('groupCode').innerHTML;
            navigator.clipboard.writeText(code);
            alert('Code copied: ' + code);
        }
        
        function addPerson(name) {
            var list = document.getElementById('participantsList');
            var waiting = document.getElementById('waitingMsg');
            if(waiting) waiting.style.display = 'none';
            
            var newPerson = document.createElement('div');
            newPerson.style.backgroundColor = 'white';
            newPerson.style.padding = '12px';
            newPerson.style.margin = '8px';
            newPerson.style.borderLeft = '5px solid green';
            newPerson.style.borderRadius = '8px';
            newPerson.style.textAlign = 'left';
            newPerson.style.boxShadow = '0px 2px 5px rgba(0,0,0,0.05)';
            newPerson.innerHTML = name;
            list.appendChild(newPerson);
            
            var people = list.getElementsByTagName('div');
            var count = people.length;
            document.querySelector('h2').innerHTML = 'Participants (' + count + ')';
            
            // Enable button if 2+ people
            if (count >= 2) {
                var btn = document.getElementById('startBtn');
                btn.disabled = false;
                btn.style.backgroundColor = 'green';
                btn.style.cursor = 'pointer';
                btn.style.boxShadow = '0px 4px 15px rgba(0, 128, 0, 0.3)';
                document.getElementById('requirementMsg').style.color = 'green';
                document.getElementById('requirementMsg').innerHTML = 'Ready to start!';
            }
        }
        
        // Simulating people joining for testing (Uncomment to test UI)
        // setTimeout(function() { addPerson('Kevin'); }, 3000);
        // setTimeout(function() { addPerson('Chris'); }, 5000);
    </script>
</body>
</html>